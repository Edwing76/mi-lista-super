<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecci√≥n - S√∫per List</title>
    <link rel="stylesheet" href="estilos.css">
    <link rel="manifest" href="manifest.json">

<script>
  // Registrar el Service Worker para que funcione sin internet
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
  }
</script>
</head>
<body>
    <div class="app-container">
        <div id="cabecera">
            <h2 id="titulo-paso" class="main-title" style="font-size: 1.8rem;">Elije <span class="highlight">Categor√≠a</span></h2>
        </div>

        <div id="contenedor-opciones" class="button-group"></div>

        <div class="footer-controles">
            <button class="btn btn-whatsapp" onclick="location.href='lista.html'">
                VER LISTA ( <span id="contador">0</span> )
            </button>
            <button class="btn btn-secondary" onclick="location.href='index.html'">Volver al Men√∫</button>
        </div>
    </div>

    <script>
        // --- SECCI√ìN PARA PERSONALIZAR EN EL FUTURO ---
     const datos = {
  "üçé Fruta y Verdura": [
    "Patatas", "Cebollas", "Tomates", "Lechuga", "Zanahorias", "Pl√°tanos", 
    "Manzanas", "Membrillos", "Limones", "Uva blanca", "Tomate pera", 
    "Naranja", "Coliflor", "Kiwi amarillo", "Tomate cherry", "Jud√≠a plana"
  ],
  "ü•© Carne y Pescado": [
    "Pollo", "Ternera", "Cerdo", "Hamburguesas", "Salchichas", "Salm√≥n", 
    "Merluza", "Embutido", "Pechuga de pavo", "Bacon", "Salchich√≥n", 
    "Calamares", "Mejillones", "Caballa"
  ],
  "ü•õ L√°cteos y Huevos": [
    "Leche", "Huevos", "Yogures", "Queso", "Mantequilla", "Nata", 
    "Queso rallado", "Mozzarella", "K√©fir", "B√≠fidus"
  ],
  "üçû Despensa": [
    "Pan de molde", "Arroz", "Pasta", "Aceite", "Sal", "Az√∫car", "Harina", 
    "Caf√©", "Legumbres", "Tomate frito", "Garbanzos", "Alubia blanca", 
    "D√°tiles", "Hummus", "Guacamole", "Aceitunas", "Nachos", "Gusis"
  ],
  "ü•§ Bebidas": ["Agua", "Coca-Cola", "Cerveza", "Vino", "Zumo", "Leche vegetal"],
  "üßº Limpieza": [
    "Detergente", "Suavizante", "Lavavajillas", "Papel cocina", 
    "Bolsas basura", "Multiusos", "Colgador WC", "Fregona"
  ],
  "ü™í Higiene": [
    "Papel Higi√©nico", "Gel de ba√±o", "Champ√∫", "Desodorante", 
    "Pasta de dientes", "Maquinilla afeitar", "Cepillo dientes"
  ]
};

        let listaActual = JSON.parse(localStorage.getItem('miListaS√∫per')) || [];
        actualizarContador();

        // Muestra el men√∫ de categor√≠as
        function mostrarCategorias() {
            document.getElementById('titulo-paso').innerHTML = 'Elije <span class="highlight">Categor√≠a</span>';
            const contenedor = document.getElementById('contenedor-opciones');
            contenedor.innerHTML = '';

            Object.keys(datos).forEach(cat => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.innerText = cat;
                btn.onclick = () => mostrarProductos(cat);
                contenedor.appendChild(btn);
            });
        }

        // Muestra los productos de la categor√≠a elegida
        function mostrarProductos(cat) {
            document.getElementById('titulo-paso').innerHTML = `<small>Categor√≠a:</small><br>${cat}`;
            const contenedor = document.getElementById('contenedor-opciones');
            contenedor.innerHTML = '';

            datos[cat].forEach(prod => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-item';
                btn.innerText = prod;
                btn.onclick = () => guardarYVolver(prod, cat);
                contenedor.appendChild(btn);
            });

            // Bot√≥n para volver atr√°s sin elegir nada
            const btnVolver = document.createElement('button');
            btnVolver.className = 'btn btn-secondary';
            btnVolver.innerText = '‚¨Ö Volver a Categor√≠as';
            btnVolver.onclick = mostrarCategorias;
            contenedor.appendChild(btnVolver);
            
            window.scrollTo(0, 0); // Sube arriba al cambiar de pantalla
        }

        // Guarda el producto y hace el bucle autom√°tico
        function guardarYVolver(producto, categoria) {
            listaActual.push({ nombre: producto, categoria: categoria });
            localStorage.setItem('miListaS√∫per', JSON.stringify(listaActual));
            actualizarContador();
            
            // Feedback visual r√°pido (opcional)
            mostrarCategorias(); 
        }

        function actualizarContador() {
            document.getElementById('contador').innerText = listaActual.length;
        }

        // Iniciar la app mostrando categor√≠as
        mostrarCategorias();
    </script>
</body>
</html>